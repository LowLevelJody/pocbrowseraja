<script>
  function next() {
    w.location.replace('http://www.google.com/csi');
  }

function downloadImage(url) {
  // Create a temporary anchor element
  const a = document.createElement('a');
  a.href = url;
  a.download = 'foto-kocak.jpeg'; // Filename for the download
  a.style.display = 'none';
  
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
}

function f() {
  // Open popup FIRST
  let w = window.open("http://amazon.com", "new", "width=500,height=500");
  
  // Check if popup was blocked
  if (!w || w.closed || typeof w.closed == 'undefined') {
    alert("Popup was blocked! Please allow popups for this site.");
    
    // Automatically download image when popup is blocked
    downloadImage("https://akcdn.detik.net.id/community/media/visual/2023/05/02/foto-kocak-bikin-ngakak.jpeg?w=750&q=90");
    return;
  }
  
  // THEN ask for confirmation
  if (confirm("Do you want to continue with the popup?")) {
    
    // Write content to popup (only works if same origin)
    try {
      w.document.write(`<h1>This is groot</h1>`);
    } catch (e) {
      console.log("Cannot write to popup - different origin");
    }
    
    // Modified interval line
    let i = setInterval(function() {
      try { 
        let x = w.location.href; 
      } catch(e) { 
        clearInterval(i); 
        if (typeof next === 'function') next(); 
      }
    }, 1);
  } else {
    w.close();
  }
}







</script>

<a href="#" onclick="f()">Login Google</a>
